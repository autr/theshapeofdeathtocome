var config={strength:.75,threshold:.45,scale:1,vertical:!0},counter=0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),window.setImmediate=function(){return window.setImmediate||function(n){return window.setTimeout(n,0)}}(),function($,n){"use strict";function e(n,e,t,i){var o=T[n],a=T[n+1],r=T[n+2];T[n]=o+C*(e-o),T[n+1]=a+C*(t-a),T[n+2]=r+C*(i-r)}function t(n,e){var t=T[e]+T[e+1]+T[e+2],i=T[n]+T[n+1]+T[n+2];return b>0?t-i>b:b>t-i}function i(n,i){if(t(n,i)){var o=T[i],a=T[i+1],r=T[i+2];e(i,T[n],T[n+1],T[n+2]),e(n,o,a,r)}}function o(){for(var n=0;z>n;n+=m)for(var e=n+k,t=n;e>t;t+=4)D?i(t,t+m):i(t,t+4);window.setImmediate(o)}function a(){window.requestAnimFrame(a),I.putImageData(E,0,0)}function r(){q||(q=!0,a(),o())}function c(){var n=A.width*config.scale,e=A.height*config.scale;h=A.width*config.scale,v=window.innerHeight,p.css("width",h).css("height",v).attr("width",h).attr("height",v),m=4*h,D?(k=m,z=(v-1)*m):(k=m-4,z=v*m),I.rect(0,0,h,v),I.fillStyle="rgba(255,255,255,1)",I.fill(),I.drawImage(A,h/2-n/2,v/2-e/2,n,e),E=I.getImageData(0,0,h,v),T=E.data,r()}function d(){C=config.strength,D=config.vertical,b=Math.floor(3*Math.pow(config.threshold,7)*255),A=new Image,A.onload=c,A.src=l}function s(){R=new dat.GUI,R.close(),R.add(config,"scale",1,4).step(1).onFinishChange(d),R.add(config,"strength",0,1).onFinishChange(d),R.add(config,"threshold",-1,1).onFinishChange(d),R.add(config,"vertical").onFinishChange(d),$("#controls").on("click",function(){return R.open(),!1})}function f(n){n.originalEvent.stopPropagation(),n.originalEvent.preventDefault();var e=n.originalEvent.dataTransfer.files;if(e&&e.length){var t=new FileReader;t.onload=function(n){l=n.target.result,d()},t.readAsDataURL(e[0])}}function g(n){n.bind("dragover",!1).bind("dragenter",!1).bind("drop",f)}function u(){open().document.write('<img src="'+p[0].toDataURL()+'"/>')}function w(){p=$("<canvas />"),p.click(u),F=$(n),F.append(p),I=p[0].getContext("2d"),g($("html")),s(),$(window).resize(d).resize()}var l="logo.png",h,m,v,p,F,A,I,q=!1,R,b,C,D,k,z,E,T;$(w)}(jQuery,".geocities");