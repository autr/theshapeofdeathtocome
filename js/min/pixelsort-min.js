var config={strength:.75,threshold:.45,scale:1,vertical:!0},counter=0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),window.setImmediate=function(){return window.setImmediate||function(n){return window.setTimeout(n,0)}}(),function($,n){"use strict";function e(n,e,t,i){var o=U[n],a=U[n+1],r=U[n+2];U[n]=o+C*(e-o),U[n+1]=a+C*(t-a),U[n+2]=r+C*(i-r)}function t(n,e){var t=U[e]+U[e+1]+U[e+2],i=U[n]+U[n+1]+U[n+2];return b>0?t-i>b:b>t-i}function i(n,i){if(t(n,i)){var o=U[i],a=U[i+1],r=U[i+2];e(i,U[n],U[n+1],U[n+2]),e(n,o,a,r)}}function o(){for(var n=0;E>n;n+=l)for(var e=n+z,t=n;e>t;t+=4)D?i(t,t+l):i(t,t+4);window.setImmediate(o)}function a(){window.requestAnimFrame(a),I.putImageData(T,0,0)}function r(){q||(q=!0,a(),o())}function c(){var n=A.width*config.scale,e=A.height*config.scale;m=A.width*config.scale,v=window.innerHeight,F.css("width",m).css("height",v).attr("width",m).attr("height",v),l=4*m,D?(z=l,E=(v-1)*l):(z=l-4,E=v*l),I.rect(0,0,m,v),I.fillStyle="rgba(255,255,255,1)",I.fill(),I.drawImage(A,m/2-n/2,v/2-e/2,n,e),T=I.getImageData(0,0,m,v),U=T.data,r()}function d(){C=config.strength,D=config.vertical,b=Math.floor(3*Math.pow(config.threshold,7)*255),A=new Image,A.onload=c,A.src=h}function s(){R=new dat.GUI,R.close(),R.add(config,"scale",1,4).step(1).onFinishChange(d),R.add(config,"strength",0,1).onFinishChange(d),R.add(config,"threshold",-1,1).onFinishChange(d),R.add(config,"vertical").onFinishChange(d)}function g(n){n.originalEvent.stopPropagation(),n.originalEvent.preventDefault();var e=n.originalEvent.dataTransfer.files;if(e&&e.length){var t=new FileReader;t.onload=function(n){h=n.target.result,d()},t.readAsDataURL(e[0])}}function f(n){n.bind("dragover",!1).bind("dragenter",!1).bind("drop",g)}function u(){open().document.write('<img src="'+F[0].toDataURL()+'"/>')}function w(){F=$("<canvas />"),p=$(n),p.append(F),I=F[0].getContext("2d"),f($("html")),s(),$(window).resize(d).resize()}var h="logo.png",m,l,v,F,p,A,I,q=!1,R,b,C,D,z,E,T,U;$(w)}(jQuery,".geocities");